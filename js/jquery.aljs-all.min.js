if("undefined"==typeof jQuery)throw new Error("Appiphony Lightning JS requires jQuery");if(function(e){"undefined"==typeof e.aljs&&(e.aljs={assetsLocation:"",scoped:!1},e.aljsInit=function(t){e.aljs=t})}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if("undefined"==typeof moment)throw new Error("The ALJS datepicker plugin requires moment.js");if(function(e){var t='<div class="slds-dropdown slds-dropdown--left slds-datepicker" aria-hidden="false" data-selection="single"><div class="slds-datepicker__filter slds-grid"><div class="slds-datepicker__filter--month slds-grid slds-grid--align-spread slds-size--3-of-4"><div class="slds-align-middle"><button id="aljs-prevButton" class="slds-button slds-button--icon-container"><svg aria-hidden="true" class="slds-button__icon slds-button__icon--small"><use xlink:href="{{assetsLocation}}/assets/icons/utility-sprite/svg/symbols.svg#left"></use></svg><span class="slds-assistive-text">Previous Month</span></button></div><h2 id="month" class="slds-align-middle" aria-live="assertive" aria-atomic="true"></h2><div class="slds-align-middle"><button id="aljs-nextButton" class="slds-button slds-button--icon-container"><svg aria-hidden="true" class="slds-button__icon slds-button__icon--small"><use xlink:href="{{assetsLocation}}/assets/icons/utility-sprite/svg/symbols.svg#right"></use></svg><span class="slds-assistive-text">Next Month</span></button></div></div><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-picklist datepicker__filter--year slds-shrink-none"></div></div></div></div>',s='<table class="datepicker__month" role="grid" aria-labelledby="month"><thead><tr id="weekdays"><th id="Sunday"><abbr title="Sunday">S</abbr></th><th id="Monday"><abbr title="Monday">M</abbr></th><th id="Tuesday"><abbr title="Tuesday">T</abbr></th><th id="Wednesday"><abbr title="Wednesday">W</abbr></th><th id="Thursday"><abbr title="Thursday">T</abbr></th><th id="Friday"><abbr title="Friday">F</abbr></th><th id="Saturday"><abbr title="Saturday">S</abbr></th></tr></thead><tbody></tbody></table></div>',i=function(i,l){this.$el=e(i);var a=moment(l.initDate)||moment(),n=l.endDateInputId;this.$datepickerEl=e(t.replace(/{{assetsLocation}}/g,l.assetsLocation)+s),this.settings=l,l.initDate&&this.setSelectedFullDate(a),n&&1===e("#"+n).length&&(this.$elEndDate=e("#"+n),l.endDate&&this.setEndFullDate(endDate)),this.initInteractivity()};i.prototype={constructor:i,initInteractivity:function(){var t=this,s=this.$datepickerEl,i=this.$el,l=this.$elEndDate||[],a=function(a){if(a.stopPropagation(),e("[data-aljs-datepicker-id]").not(this).each(function(){e(this).data("datepicker").closeDatepicker()}),a.target===i[0]&&null!==i.val()&&""!==i.val()||a.target===l[0]&&null!==l.val()&&""!==l.val())t.$selectedInput=e(this).parent().find("input"),t.$selectedInput.on("keyup",t,t.processKeyup).on("blur",t,t.processBlur),t.closeDatepicker();else{var n=t.selectedFullDate||moment();t.viewedMonth=n.month(),t.viewedYear=n.year(),t.fillMonth(),t.$selectedInput=e(this).parent().find("input"),t.$selectedInput.off("keyup").off("blur"),t.$selectedInput.closest(".slds-form-element").append(s),t.initYearDropdown(),e([i,s,l,i.prev("svg")]).each(function(){e(this).on("click",t.blockClose)}),s.on("click",t,t.processClick),t.$selectedInput.blur(),e("body").on("click",t,t.closeDatepicker)}};e(i).on("focus",a),e(i.prev("svg")).on("click",a),i.prev("svg").css("cursor","pointer"),l.length>0&&(e(l).on("focus",a),e(l.prev("svg")).on("click",a),l.prev("svg").css("cursor","pointer"))},fillMonth:function(){var t=this.settings.dayLabels,s=this.getMonthArray(),i=e("<tbody>"),l=this.$elEndDate&&this.$elEndDate.length>0;this.selectedFullDate,this.selectedEndDate;s.forEach(function(s){var a=e("<tr>").appendTo(i);s.hasMultiRowSelection&&a.addClass("slds-has-multi-row-selection"),s.data.forEach(function(s,i){var n=e('<td data-aljs-date="'+s.dateValue+'">').appendTo(a);n.prop({headers:t[i].full,role:"gridcell"}),e('<span class="slds-day">'+s.value+"</span>").appendTo(n),s.isCurrentMonth||(n.addClass("slds-disabled-text"),n.prop("aria-disabled","true")),s.isSelected||s.isSelectedEndDate||s.isSelectedMulti?(n.prop("aria-selected","true"),n.addClass(l?"slds-is-selected-multi slds-is-selected":"slds-is-selected")):n.prop("aria-selected","false"),s.isToday&&n.addClass("slds-is-today")})}),this.$datepickerEl.find("tbody").replaceWith(i),this.$datepickerEl.find("#month").text(this.settings.monthLabels[this.viewedMonth].full),this.$datepickerEl.find("#aljs-year").text(this.viewedYear)},initYearDropdown:function(){var t=this,s=this.$datepickerEl.find("select"),i=this.viewedYear;if(s.length>0)s.val(this.viewedYear);else{var l=e("<label></label>");s=e('<select class="slds-select select picklist__label">').appendTo(l);for(var a=moment().year(),n=a-this.settings.numYearsBefore;n<=a+this.settings.numYearsAfter;n++){e('<option value="'+n+'">'+n+"</option>").appendTo(s)}s.val(i),this.$datepickerEl.find(".datepicker__filter--year").append(l)}s.on("change",function(s){t.viewedYear=e(s.target).val(),t.fillMonth()})},getMMDDYYYY:function(e,t,s){return(e>9?e:"0"+e)+"/"+(t>9?t:"0"+t)+"/"+s},getMonthArray:function(){for(var e=this.selectedFullDate,t=this.selectedEndDate,s=(e?e.date():null,e?e.month():null,e?e.year():null,this.viewedMonth),i=this.viewedYear,l=0===s?11:s-1,a=11===s?0:s+1,n=this.getNumDaysInMonth(i,s),o=this.getNumDaysInMonth(i,l),d=(this.getNumDaysInMonth(i,a),new Date(i,s,1).getDay()),r=[],c=[],u=(this.dayLabels,o-(d-1));o>=u;u++){var h=moment(new Date(11===l?i-1:i,l,u));r.push({value:u,dateValue:this.getMMDDYYYY(l+1,u,i),isCurrentMonth:!1,isToday:h.isSame(moment(),"day")})}for(var u=1;n>=u;u++){var h=moment(new Date(i,s,u));r.push({value:u,dateValue:this.getMMDDYYYY(s+1,u,i),isCurrentMonth:!0,isSelected:e&&h.isSame(e,"day"),isSelectedEndDate:t&&h.isSame(t,"day"),isSelectedMulti:e&&t&&(h.isBetween(e,t)||h.isSame(e,"day")||h.isSame(t,"day")),isToday:h.isSame(moment(),"day")})}if(r.forEach(function(e,t,s){if(t%7===0){var i=t>=7&&s[t-1].isSelectedMulti&&e.isSelectedMulti;i&&(c[c.length-1].hasMultiRowSelection=!0),c.push({data:[],hasMultiRowSelection:i})}c[c.length-1].data.push(e)}),c[c.length-1].data.length<7)for(var h=moment(new Date(0===a?i+1:i,a,u)),f=7-c[c.length-1].data.length,u=1;f>=u;u++)c[c.length-1].data.push({value:u,dateValue:this.getMMDDYYYY(a+1,u,0===a?i+1:i),isCurrentMonth:!1,isSelected:e&&h.isSame(e,"day"),isToday:h.isSame(moment(),"day")});return c},setSelectedFullDate:function(e){var t=this.selectedFullDate;this.selectedFullDate=e,this.$el.val(e.format(this.settings.format)),t&&t.isSame(e,"day")||this.settings.onChange(this)},setSelectedEndDate:function(e){var t=this.selectedEndDate;this.selectedEndDate=e,this.$elEndDate.val(e.format(this.settings.format)),t&&t.isSame(e,"day")||this.settings.onChange(this)},processClick:function(t){t.preventDefault();var s=t.data,i=e(t.target);i.closest("#aljs-prevButton").length>0&&s.clickPrev(t),i.closest("#aljs-nextButton").length>0&&s.clickNext(t),i.closest("td[data-aljs-date]").length>0&&s.clickDate(t),i.closest("li[data-aljs-year]").length>0&&s.clickYear(t)},processKeyup:function(t){13===t.keyCode&&e(this).blur()},processBlur:function(t){if(t){var s=t.data,i=e(this).val(),l=moment(i,s.settings.format);l.isValid()&&(s.$elEndDate&&s.$elEndDate.length>0&&s.$elEndDate[0]===s.$selectedInput[0]?s.setSelectedEndDate(l):s.setSelectedFullDate(l),s.closeDatepicker(t),s.$selectedInput.off("keyup").off("blur"))}},clickPrev:function(e){var t=e.data;0===t.viewedMonth?(t.viewedMonth=11,t.viewedYear--):t.viewedMonth--,t.fillMonth()},clickNext:function(e){var t=e.data;11===t.viewedMonth?(t.viewedMonth=0,t.viewedYear++):t.viewedMonth++,t.fillMonth()},clickYear:function(t){var s=t.data,i=e(t.target).closest("li[data-aljs-year]");s.viewedYear=parseInt(i.data("aljs-year")),s.fillMonth()},clickYearDropdown:function(e){var t=e.data;t.$datepickerEl.find("#aljs-yearDropdown").length>0?t.hideYearDropdown():t.showYearDropdown()},clickDate:function(t){var s=t.data,i=e(t.target).closest("td[data-aljs-date]");if(!i.hasClass("slds-disabled-text")){var l=i.data("aljs-date");s.$elEndDate&&s.$elEndDate.length>0&&s.$elEndDate[0]===s.$selectedInput[0]?s.setSelectedEndDate(moment(l,"MM/DD/YYYY")):s.setSelectedFullDate(moment(l,"MM/DD/YYYY")),s.closeDatepicker(t)}},closeDatepicker:function(t){var s=this,i=e("body");t&&(s=t.data,i=e(this));var l=s.$datepickerEl,a=s.$selectedInput;0===i.closest(s.$el.parent()).length&&a&&(a.closest(".slds-form-element").find(".slds-datepicker").remove(),e("body").unbind("click",s.closeDatepicker),l.unbind("click",s.processClick))},blockClose:function(e){e.stopPropagation()},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getNumDaysInMonth:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDate:function(e){return e?this.selectedFullDate.format(e):this.selectedFullDate},setDate:function(e){this.setSelectedFullDate(moment(e))},getEndDate:function(e){return this.$elEndDate&&this.selectedEndDate?e?this.selectedEndDate.format(e):this.selectedEndDate:void 0},setEndDate:function(e){this.$elEndDate&&this.setSelectedEndDate(moment(e))}},e.fn.datepicker=function(t,s){var l,a=e.extend({assetsLocation:e.aljs.assetsLocation,numYearsBefore:50,numYearsAfter:10,format:"MM/DD/YYYY",endDateInputId:null,onChange:function(e){},dayLabels:[{full:"Sunday",abbv:"S"},{full:"Monday",abbv:"M"},{full:"Tuesday",abbv:"T"},{full:"Wednesday",abbv:"W"},{full:"Thursday",abbv:"T"},{full:"Friday",abbv:"F"},{full:"Saturday",abbv:"S"}],monthLabels:[{full:"January",abbv:""},{full:"February",abbv:""},{full:"March",abbv:""},{full:"April",abbv:""},{full:"May",abbv:""},{full:"June",abbv:""},{full:"July",abbv:""},{full:"August",abbv:""},{full:"September",abbv:""},{full:"October",abbv:""},{full:"November",abbv:""},{full:"December",abbv:""}]},"object"==typeof t?t:{});if(this.each(function(){var n=e(this),o=n.data("datepicker");if(!o){var d=new i(this,a);n.data("datepicker",o=d),n.attr("data-aljs-datepicker-id",n.attr("id"))}"string"==typeof t&&(l=o[t](s))}),void 0===l||l instanceof i)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return l}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){e.fn.iconGroup=function(t){function s(e){e.removeClass(n).addClass(a).trigger("selected.aljs.button")}function i(e){e.removeClass(a).addClass(n).trigger("deselected.aljs.button")}var l={},a="slds-is-selected",n="slds-not-selected";if(l.settings=e.extend({type:"sort",defaultButtonId:"",onChange:function(e){console.log(e)},assetsLocation:e.aljs.assetsLocation},t),"string"!=typeof t)return l.buttons=e(".slds-button",this),l.defaultIcon=""===l.settings.defaultButtonId?l.buttons.eq(0):"#"+l.settings.defaultButtonId,"sort"===l.settings.type&&s(e(l.defaultIcon)),l.buttons.click(function(){l.target=e(this),l.targetId=l.target.attr("id"),!l.target.hasClass(a)||"toggle"!==l.settings.type&&"switch"!==l.settings.type?l.target.hasClass(n)&&"toggle"===l.settings.type?(s(l.target),l.settings.onChange()):!l.target.hasClass(n)||"switch"!==l.settings.type&&"sort"!==l.settings.type||(l.buttons.each(function(){e(this)!==l.target&&e(this).hasClass(a)&&i(e(this))}),s(l.target),l.settings.onChange(l)):(i(l.target),l.settings.onChange())}),this;if("string"==typeof t)return this.each(function(){switch(t){case"select":s(e(this));break;case"deselect":i(e(this));break;default:console.error("The method you entered does not exist")}});throw new Error("This plugin can only be run with a selector, or with a command")}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){var t='<div class="slds-pill__container slds-hide"></div>',s='<span class="slds-pill"><a href="javascript:void(0)" class="slds-pill__label"><svg aria-hidden="true" class="{{objectIconClass}} slds-icon slds-pill__icon{{hasIcon}}"><use xlink:href="{{objectIconUrl}}"></use></svg><span class="slds-pill__label">{{selectedResultLabel}}</span><button class="slds-button slds-button--icon-bare slds-pill__remove"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="{{assetsLocation}}/assets/icons/utility-sprite/svg/symbols.svg#close"></use></svg><span class="slds-assistive-text">Remove</span></button></a></span>',i='<span class="slds-pill"><a href="javascript:void(0)" class="slds-pill__label"><img class="{{objectIconClass}} slds-icon slds-pill__icon{{hasIcon}}" src="{{objectIconUrl}}"/><span class="slds-pill__label">{{selectedResultLabel}}</span><button class="slds-button slds-button--icon-bare slds-pill__remove"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="{{assetsLocation}}/assets/icons/utility-sprite/svg/symbols.svg#close"></use></svg><span class="slds-assistive-text">Remove</span></button></a></span>',l='<div class="slds-lookup__menu" role="listbox"><ul class="slds-lookup__list" role="presentation"></ul></div>',a='<div class="slds-lookup__item"><button class="slds-button"><svg aria-hidden="true" class="slds-icon-text-default slds-icon slds-icon--small{{hasIcon}}"><use xlink:href="{{assetsLocation}}/assets/icons/utility-sprite/svg/symbols.svg#search"></use></svg>&quot;{{searchTerm}}&quot; in {{objectPluralLabel}}</button></div>',n='<div class="slds-lookup__item"><button class="slds-button"><svg aria-hidden="true" class="slds-icon-text-default slds-icon slds-icon--small{{hasIcon}}"><use xlink:href="{{assetsLocation}}/assets/icons/utility-sprite/svg/symbols.svg#add"></use></svg>Add {{objectLabel}}</button></div>',o='<li class="slds-lookup__item"><a id="{{resultId}}" href="javascript:void(0)" role="option"><svg aria-hidden="true" class="{{objectIconClass}} slds-icon slds-icon--small{{hasIcon}}"><use xlink:href="{{objectIconUrl}}"></use></svg>{{resultLabel}}</a></li>',d='<li class="slds-lookup__item"><a id="{{resultId}}" href="javascript:void(0)" role="option"><img class="{{objectIconClass}} slds-icon slds-icon--small{{hasIcon}}" src="{{objectIconUrl}}"/>{{resultLabel}}</a></li>',r=function(s,i){this.$el=e(s),this.$lookupContainer=this.$el.closest(".slds-lookup"),this.isSingle="single"===this.$lookupContainer.data("select"),this.settings=i,this.isSingle?this.$singleSelect=e(t).insertBefore(this.$el):(this.$multiSelect=e(t).appendTo(this.$lookupContainer.find(".slds-form-element")),this.selectedResults=[]),this.isStringEmpty(i.searchTerm)?i.initialSelection&&this.setSelection(i.initialSelection):(this.$el.val(i.searchTerm),this.setSingleSelect()),this.initLookup()};r.prototype={constructor:r,isStringEmpty:function(e){return null===e||"undefined"==typeof e||""===e.trim()},initLookup:function(){var t=this;this.$el.on("focus",this,this.runSearch).on("keyup",this,this.runSearch).on("blur",this,this.handleBlur),this.$lookupContainer.on("keyup",function(s){s.stopPropagation();var i=e(this).find("a:focus");27===s.keyCode&&t.$el.blur(),40===s.keyCode&&(i.length>0?i.parent().next().find("a").focus():e(this).find(".slds-lookup__list").find("a:first").focus()),38===s.keyCode&&(i.length>0?i.parent().prev().find("a").focus():e(this).find(".slds-lookup__list").find("a:last").focus())})},runSearch:function(e){var t=e.data,s=t.$el.val();t.isStringEmpty(s)?t.getDefaultResults():t.getSearchTermResults(s)},setMultiSelect:function(t){var l=this,a=this.$multiSelect.html(""),n=this.$lookupContainer,o=l.settings.useImgTag?i:s;t.length>0?(t.forEach(function(t){var s=e(o.replace("{{objectIconUrl}}",l.settings.objectIconUrl).replace("{{objectIconClass}}",l.settings.objectIconClass).replace("{{hasIcon}}",""!==l.settings.objectIconUrl?"":" slds-hide").replace("{{assetsLocation}}",l.settings.assetsLocation).replace("{{selectedResultLabel}}",t.label));s.removeClass("slds-pill--bare").attr("id",t.id).on("click","a, button",l,l.clearMultiSelectResult),a.append(s)}),a.addClass("slds-show").removeClass("slds-hide"),n.addClass("slds-has-selection")):(a.html(""),a.addClass("slds-hide").removeClass("slds-show"),n.removeClass("slds-has-selection"))},setSingleSelect:function(e){var t=this,l=e||"",a=t.settings.useImgTag?i:s;this.$singleSelect.html(a.replace("{{objectIconUrl}}",this.settings.objectIconUrl).replace("{{objectIconClass}}",t.settings.objectIconClass).replace("{{hasIcon}}",""!==t.settings.objectIconUrl?"":" slds-hide").replace("{{assetsLocation}}",this.settings.assetsLocation).replace("{{selectedResultLabel}}",l)),e?(this.$singleSelect.addClass("slds-show").removeClass("slds-hide"),this.$el.addClass("slds-hide"),this.$lookupContainer.addClass("slds-has-selection"),this.$singleSelect.one("click","button",this,this.clearSingleSelect)):(this.$singleSelect.addClass("slds-hide").removeClass("slds-show"),this.$el.val("").removeClass("slds-hide"),this.$lookupContainer.removeClass("slds-has-selection"),window.setTimeout(function(){t.$el.focus()},100))},getSearchTermResults:function(e){var t=this;if(this.settings.items.length>0)this.searchResults=this.settings.items.filter(function(t){return null!==t.label.toLowerCase().match(e.toLowerCase())}),this.renderSearchResults();else{var s=function(e){t.searchResults=e,t.renderSearchResults()};this.settings.filledSearchTermQuery(e,s)}},getDefaultResults:function(){var e=this;if(this.settings.items.length>0)this.searchResults=this.settings.items,this.renderSearchResults();else{var t=function(t){e.searchResults=t,e.renderSearchResults()};this.settings.emptySearchTermQuery(t)}},renderSearchResults:function(){this.closeSearchDropdown();var t=e(l),s=t.find("ul.slds-lookup__list"),i=this.$el.val(),r=this,c=!1;if(!this.isStringEmpty(i)&&i.length>1&&this.settings.showSearch===!0&&(c=!0,s.before(a.replace("{{searchTerm}}",i).replace("{{objectPluralLabel}}",this.settings.objectPluralLabel).replace("{{assetsLocation}}",e.aljs.assetsLocation))),this.searchResults.forEach(function(t){var i,l=r.settings.useImgTag?d:o;if(r.isSingle)i=s.append(l.replace("{{resultLabel}}",t.label).replace("{{hasIcon}}",""!==r.settings.objectIconUrl?"":" slds-hide").replace("{{resultId}}",t.id).replace("{{objectIconUrl}}",r.settings.objectIconUrl).replace("{{objectIconClass}}",r.settings.objectIconClass));else if(r.selectedResults){var a=r.selectedResults.map(function(e){return e.id});0!==a.length&&-1!==a.indexOf(t.id)||(i=s.append(l.replace("{{resultLabel}}",t.label).replace("{{hasIcon}}",""!==r.settings.objectIconUrl?"":" slds-hide").replace("{{resultId}}",t.id).replace("{{objectIconUrl}}",r.settings.objectIconUrl).replace("{{objectIconClass}}",r.settings.objectIconClass)))}i&&i.find("a").on("focus",function(){r.$el.attr("aria-activedescendant",e(this).attr("id"))}).on("blur",r,r.handleBlur)}),this.settings.clickAddFunction){var u=s.after(n.replace("{{hasIcon}}"," slds-icon").replace("{{objectLabel}}",this.settings.objectLabel).replace("{{assetsLocation}}",e.aljs.assetsLocation));u.next().on("click",function(){u.off("click"),r.settings.clickAddFunction()})}s.one("click","a",this,this.clickResult);var h=this.searchResults.length>0||this.settings.clickAddFunction||c;h&&(this.$lookupSearchContainer=t,t.appendTo(this.$lookupContainer),this.$el.attr("aria-expanded","true"))},closeSearchDropdown:function(){this.$lookupSearchContainer&&(this.$lookupSearchContainer.remove(),this.$lookupSearchContainer=null),this.$el.attr("aria-expanded","false"),this.$el.attr("aria-activedescendant",null)},handleBlur:function(t){var s=t.data;window.setTimeout(function(){0===e(t.relatedTarget).closest(".slds-lookup__menu").length&&s.$lookupSearchContainer&&s.closeSearchDropdown()},250)},clickResult:function(t){var s=t.data,i=e(this).attr("id");s.selectResult(i)},selectResult:function(e){var t=this.searchResults.filter(function(t){return t.id==e});this.closeSearchDropdown(),this.isSingle?(this.selectedResult=t.length>0?t[0]:null,this.setSingleSelect(this.selectedResult.label)):t.length>0&&(this.selectedResults.push(t[0]),this.setMultiSelect(this.selectedResults),this.$el.val("")),this.isSingle?this.settings.onChange(this.selectedResult,!0):this.settings.onChange(this.selectedResults,!0)},clearSingleSelect:function(e){var t=e.data;t.selectedResult=null,t.setSingleSelect(),t.settings.onChange(t.selectedResult,!1)},clearMultiSelectResult:function(t){var s,i=t.data,l=e(this).closest("span.slds-pill"),a=l.attr("id");i.selectedResults.forEach(function(e,t){e.id==a&&(s=t)}),"undefined"!=typeof s&&null!==s&&(i.selectedResults.splice(s,1),i.setMultiSelect(i.selectedResults),i.settings.onChange(i.selectedResults,!1))},getSelection:function(){return this.isSingle?this.selectedResult||null:this.selectedResults||null},setSelection:function(t){var s=this;if(!t||"object"!=typeof t)throw new Error("setSelection must be called with either a valid result object or an array of result objects.");e.isEmptyObject(t)?s.isSingle?(s.selectedResult=null,s.setSingleSelect(),s.settings.onChange(s.selectedResult,!1)):(s.selectedResults=[],s.setMultiSelect(s.selectedResults),s.settings.onChange(s.selectedResults,!1)):t instanceof Array?(this.searchResults=t,this.selectedResults=[],t.forEach(function(e){s.selectResult(e.id)})):(this.selectedResult=null,this.searchResults=[t],s.selectResult(t.id))}},e.fn.lookup=function(t){var s,i=arguments,l=e.extend({assetsLocation:e.aljs.assetsLocation,objectPluralLabel:"Objects",objectLabel:"Object",useImgTag:!1,objectIconUrl:"/assets/icons/standard-sprite/svg/symbols.svg#account",objectIconClass:"slds-icon-standard-account",searchTerm:"",items:[],emptySearchTermQuery:function(e){e([])},filledSearchTermQuery:function(e,t){t([])},clickAddFunction:null,onChange:function(){},initialSelection:null,showSearch:!1},"object"==typeof t?t:{});if(this.each(function(){var a=e(this),n=a.data("aljs-lookup");if(!n){var o=new r(this,l);a.data("aljs-lookup",n=o)}"string"==typeof t&&(s=n[t](i[1],i[2]))}),void 0===s||s instanceof r)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return s}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){function t(){l=e.aljs.scoped?".slds":a,e(".slds-backdrop").remove(),e(l).append('<div class="aljs-modal-container"></div>');var t=e(".aljs-modal-container");n.appendTo(t).append('<div class="slds-backdrop"></div>').attr("aria-hidden","true").addClass("slds-hide")}function s(t,s){var i=t.data("aljs-show"),l=e("#"+i);void 0===i?console.error('No "data-aljs-show" attribute has been set'):(l.modal("show",s),t.blur(),o=t)}var i,l,a="body",n=e(".slds-modal"),o=null;e.fn.modal=function(d,r){function c(e){27==e.keyCode&&n.is(":visible")&&u()}function u(){f.self.modal("dismiss",p).unbind("click"),e(a).unbind("keyup",c),n.unbind("click"),b.unbind("click")}function h(t){s(e(this),d)}var f={};if(f.self=this,f.tabTarget=e('[href], [contenteditable="true"], button, a, input, textarea, select',l),f.modalTabTarget=e('[href], [contenteditable="true"], button, a, input, textarea, select',f.self),f.hasSelector=!(!d||!d.hasOwnProperty("selector")),null!==d&&"string"==typeof d){var p=e.extend({selector:null,dismissSelector:'[data-aljs-dismiss="modal"]',backdropDismiss:!1,onShow:function(e){},onShown:function(e){},onDismiss:function(e){},onDismissed:function(e){}},r),b=e(p.dismissSelector),g=e(".slds-modal__header, .slds-modal__content, .slds-modal__footer");switch(d){case"show":i=!0,f.id=this.attr("id"),e(".slds-modal").removeClass("slds-fade-in-open").attr("aria-hidden","false"),e(".slds-backdrop").remove(),e(".aljs-modal-container").append('<div class="slds-backdrop"></div>'),e(a).keyup(c),f.self.addClass("slds-show"),b.click(function(e){e.preventDefault(),u()}),p.backdropDismiss&&(n.click(u),g.click(function(e){e.stopPropagation()})),f.tabTarget.attr("tabindex","-1"),f.modalTabTarget.attr("tabindex","1"),setTimeout(function(){e(".slds-backdrop").addClass("slds-backdrop--open"),f.self.addClass("slds-fade-in-open").trigger("show.aljs.modal"),p.onShow(f),setTimeout(function(){f.self.trigger("shown.aljs.modal"),p.onShown(f),i=!1},400)},25);break;case"dismiss":i||e(".slds-backdrop").removeClass("slds-backdrop--open"),p.onDismiss(f),f.tabTarget.removeAttr("tabindex"),f.self.removeClass("slds-fade-in-open").attr("aria-hidden","true"),null!==o&&o.focus(),f.self.trigger("dismiss.aljs.modal"),setTimeout(function(){i||e(".slds-backdrop").remove(),o=null,f.self.addClass("slds-hide").trigger("dismissed.aljs.modal"),p.onDismissed(f)},200);break;case"trigger":var v=f.self.data("aljs-show"),m=e("#"+v);m.modal("show",p);break;default:console.error("The method you entered does not exist")}}else f.hasSelector&&1===this.length?(t(),this.on("click",d.selector,h)):(t(),f.self.click(function(){s(e(this),d)}));return this}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){var t='<li draggable="true" id="{{optionId}}" class="slds-picklist__item slds-has-icon slds-has-icon--left" aria-selected="false" tabindex="0" role="option"><span class="slds-truncate"><span>{{optionLabel}}</span></span></li>',s=function(t,s){this.$el=e(t),this.$selectedContainer=this.$el.find('[data-aljs-multi-select="selected"]').find("ul"),this.$unselectedContainer=this.$el.find('[data-aljs-multi-select="unselected"]').find("ul"),this.selectedItems=s.selectedItems,this.unselectedItems=s.unselectedItems,this.settings=s,this.init()};s.prototype={constructor:s,init:function(){this.renderPicklists(),this.$el.find('[data-aljs-multi-select="unselect"]').on("click",this,this.unselectOption),this.$el.find('[data-aljs-multi-select="select"]').on("click",this,this.selectOption),this.$el.find('[data-aljs-multi-select="move-up"]').on("click",this,this.moveOptionUp),this.$el.find('[data-aljs-multi-select="move-down"]').on("click",this,this.moveOptionDown)},renderPicklists:function(){var t=this;this.unselectedItems.forEach(function(e){t.$unselectedContainer.append(t.createPicklistDomItem(e))}),this.$unselectedContainer.on("click","li",function(s){e(this).addClass("slds-is-selected").attr("aria-selected","true").siblings().removeClass("slds-is-selected").attr("aria-selected","false"),t.itemToSelect=e(this).data("aljs-picklist-obj")}).on("dragstart","li",function(s){t.itemToSelect=e(this).data("aljs-picklist-obj")}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){e.preventDefault(),e.stopPropagation(),t.$el.find('[data-aljs-multi-select="unselect"]').click()}),this.selectedItems.forEach(function(e){t.$selectedContainer.append(t.createPicklistDomItem(e))}),this.$selectedContainer.on("click","li",function(s){e(this).addClass("slds-is-selected").attr("aria-selected","true").siblings().removeClass("slds-is-selected").attr("aria-selected","false"),t.itemToUnselect=e(this).data("aljs-picklist-obj")}).on("dragstart","li",function(s){t.itemToUnselect=e(this).data("aljs-picklist-obj")}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){e.preventDefault(),e.stopPropagation(),t.$el.find('[data-aljs-multi-select="select"]').click()})},selectOption:function(e){var t=e.data;t.itemToSelect&&(t.$unselectedContainer.find("#"+t.itemToSelect.id).removeClass("slds-is-selected").attr("aria-selected","false").appendTo(t.$selectedContainer),t.unselectedItems.splice(t.unselectedItems.indexOf(t.itemToSelect),1),t.selectedItems.push(t.itemToSelect),t.itemToSelect=null)},unselectOption:function(e){var t=e.data;t.itemToUnselect&&(t.$selectedContainer.find("#"+t.itemToUnselect.id).removeClass("slds-is-selected").attr("aria-selected","false").appendTo(t.$unselectedContainer),t.selectedItems.splice(t.selectedItems.indexOf(t.itemToUnselect),1),t.unselectedItems.push(t.itemToUnselect),t.itemToUnselect=null)},moveOptionUp:function(e){var t=e.data;if(t.itemToUnselect){var s=t.selectedItems.indexOf(t.itemToUnselect);if(s>0){t.selectedItems.splice(s,1),t.selectedItems.splice(s-1,0,t.itemToUnselect);var i=t.$selectedContainer.find("#"+t.itemToUnselect.id);i.removeClass("slds-is-selected").attr("aria-selected","false").insertBefore(i.prev("li")),t.itemToUnselect=null}}},moveOptionDown:function(e){var t=e.data;if(t.itemToUnselect){var s=t.selectedItems.indexOf(t.itemToUnselect);if(s<t.selectedItems.length-1){t.selectedItems.splice(s,1),t.selectedItems.splice(s+1,0,t.itemToUnselect);var i=t.$selectedContainer.find("#"+t.itemToUnselect.id);i.removeClass("slds-is-selected").attr("aria-selected","false").insertAfter(i.next("li")),t.itemToUnselect=null}}},createPicklistDomItem:function(s){return e(t.replace("{{optionId}}",s.id).replace("{{optionLabel}}",s.label)).data("aljs-picklist-obj",s)},setSelectedItems:function(e){var t=this;if(e&&e.length>0){var s=this.unselectedItems.filter(function(t){return-1!==e.indexOf(t.id)});s.forEach(function(e){t.itemToSelect=e,t.$el.find('[data-aljs-multi-select="select"]').click()})}},setUnselectedItems:function(e){var t=this;if(e&&e.length>0){var s=this.selectedItems.filter(function(t){return-1!==e.indexOf(t.id)});s.forEach(function(e){t.itemToUnselect=e,t.$el.find('[data-aljs-multi-select="unselect"]').click()})}},getSelectedItems:function(){return this.selectedItems},getUnselectedItems:function(){return this.unselectedItems}},e.fn.multiSelect=function(t){var i,l=arguments,a=e.extend({selectedItems:[],unselectedItems:[],assetsLocation:e.aljs.assetsLocation},"object"==typeof t?t:{});if(this.each(function(){var n=e(this),o=n.data("aljs-multi-select");if(!o){var d=new s(this,a);n.data("aljs-multi-select",o=d)}"string"==typeof t&&(i=o[t](l[1],l[2]))}),void 0===i||i instanceof s)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return i}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){e.fn.notification=function(t){e.extend({assetsLocation:e.aljs.assetsLocation},t);if(1===this.length&&"string"!=typeof t)return this.on("click",'[data-aljs-dismiss="notification"]',function(t){var s=e(this).closest(".slds-notify");s.length>0&&(s.trigger("dismissed.aljs.notification"),s.addClass("slds-hide"))});if("string"==typeof t)return this.each(function(){var s=e(this);if(!s.hasClass("slds-notify"))throw new Error("This method can only be run on a notification with the slds-notify class on it");"show"===t||"toggle"===t&&s.hasClass("slds-hide")?(s.removeClass("slds-hide"),$notification.trigger("dismissed.aljs.notification")):("dismiss"===t||"toggle"===t&&!s.hasClass("slds-hide"))&&(s.addClass("slds-hide"),$notification.trigger("shown.aljs.notification"))});throw new Error("This plugin can only be run with a selector, or with a command")}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){var t=function(t,s){this.$el=e(t),this.settings=s,this.obj={},this.bindTrigger(),this.bindChoices()};t.prototype={constructor:t,bindTrigger:function(){var t=this,s=this.$el;this.obj.$trigger=e(".slds-button",s),this.obj.$dropdown=e(".slds-dropdown",s),this.obj.$choices=e(".slds-dropdown__item a",s),this.obj.$trigger.unbind().click(function(s){return s.stopPropagation(),t.obj.id=e(this).attr("id"),t.obj.$dropdown.hasClass("slds-hide")?(e('[data-aljs="picklist"]').not(t.$el).picklist("close"),t.obj.$dropdown.removeClass("slds-hide").addClass("slds-show"),null===t.obj.valueId||"undefined"==typeof t.obj.valueId?t.focusedIndex=null:t.focusedIndex=t.obj.$dropdown.find("li").index(t.obj.$dropdown.find("#"+t.obj.valueId)),t.focusOnElement(),t.obj.$dropdown.on("keyup",t,t.processKeypress)):(t.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),t.obj.$dropdown.unbind("keyup",t.processKeypress)),!1}),e("body").click(function(){t.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),t.obj.$dropdown.unbind("keyup",t.processKeypress);
}).keyup(function(t){27===t.keyCode&&e('[data-aljs="picklist"]').picklist("close")})},processKeypress:function(e){var t=e.data,s=t.obj.$choices.length;switch(e.keyCode){case 40:t.focusedIndex=t.focusedIndex===s-1?0:t.focusedIndex+1,t.focusOnElement();break;case 38:t.focusedIndex=0===t.focusedIndex?s-1:t.focusedIndex-1,t.focusOnElement();break;case 27:t.$el.picklist("close")}return!1},focusOnElement:function(){null!==this.focusedIndex&&this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var t=this;this.obj.$valueContainer=e("> span",this.obj.$trigger),this.obj.$choices.unbind().click(function(s){s.stopPropagation();var i=e(this).closest("li").attr("id");t.setValueAndUpdateDom(i),t.settings.onChange(t.obj)})},setValueAndUpdateDom:function(e){var t=this.$el.find("#"+e);this.obj.value=t.find("a").text(),this.obj.valueId=e,this.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("change.aljs.picklist").focus(),this.obj.$valueContainer.text(this.obj.value),this.obj.$choices.parent().removeClass("slds-is-selected"),t.addClass("slds-is-selected")},setValue:function(e,t){this.setValueAndUpdateDom(e),t&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId},getValue:function(){return this.obj},close:function(){this.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),this.obj.$dropdown.unbind("keyup",this.processKeypress)}},e.fn.picklist=function(s){var i,l=arguments,a=e.extend({assetsLocation:e.aljs.assetsLocation,onChange:function(e){}},"object"==typeof s?s:{});if(this.each(function(){var n=e(this),o=n.data("aljs-picklist");n.find(".slds-dropdown").addClass("slds-hide");if(!o){var d=new t(this,a);n.data("aljs-picklist",o=d)}"string"==typeof s&&(i=o[s](l[1],l[2]))}),void 0===i||i instanceof t)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return i}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){e.fn.pill=function(t){e.extend({assetsLocation:e.aljs.assetsLocation},t);if(1===this.length)return this.on("click",'[data-aljs-dismiss="pill"]',function(t){var s=e(this).closest(".slds-pill");s.length>0&&(s.trigger("dismissed.aljs.pill"),s.remove())});throw new Error("This plugin can only be run with a selector targeting one container (e.g., 'body')")}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");if(function(e){var t=15,s=15,i=function(t){var s=t.data,i=e(t.target).is(e(s.selector))?e(t.target):e(t.target).closest(s.selector||'[data-aljs="popover"]');console.log(s.selector);var o=!!i.attr("data-aljs-show");i.attr("data-aljs-title")||(i.attr("data-aljs-title",i.attr("title")),i.attr("title",""));var d=i.parent().hasClass("slds-button")?' style="line-height: normal;"':"",r=i.attr("data-aljs-id")||"aljs-"+(new Date).valueOf(),c=o?e("#"+i.data("aljs-show")).html():i.data("aljs-title"),u=i.attr("data-aljs-placement")||"top",h={top:"bottom",bottom:"top",left:"right",right:"left"},f="overflow: visible; display: inline-block; position: absolute;",p=""!=s.modifier?" slds-popover--"+s.modifier:"",b=""!=s.theme?" slds-theme--"+s.theme:"",g='<div id="'+r+'" aria-describedby="'+r+'" class="slds-popover'+p+b+" slds-nubbin--"+(h[u]||"top")+'" style="'+f+'"><div class="slds-popover__body"'+d+">"+c+"</div></div>";if(0===i.next(".slds-popover").length){var v=e.aljs.scoped?e(g).appendTo(".slds"):e(g).appendTo("body"),m=v[0].offsetWidth,j=v[0].offsetHeight,y=n(i),k=a(u,y,m,j);l(k,u,m,j,v)}},l=function(e,t,s,i,l){var a=o(t,e,s,i);a.left?e.left+=a.left:e.top+=a.top,l.offset(e)},a=function(e,i,l,a){var n={};switch(e){case"bottom":n={top:i.top+i.height+t,left:i.left+i.width/2-l/2};break;case"top":n={top:i.top-a-t,left:i.left+i.width/2-l/2};break;case"left":n={top:i.top+i.height/2-a/2,left:i.left-l-s};break;default:n={top:i.top+i.height/2-a/2,left:i.left+i.width+s}}return n},n=function(t){t=t||this.$element;var s=t[0],i="BODY"==s.tagName,l=s.getBoundingClientRect();null==l.width&&(l=e.extend({},l,{width:l.right-l.left,height:l.bottom-l.top}));var a=i?{top:0,left:0}:t.offset(),n={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},l,n,o,a)},o=function(t,s,i,l){var a={top:0,left:0},o=n(e("body"));if(/right|left/.test(t)){var d=s.top-o.scroll,r=s.top-o.scroll+l;d<o.top?a.top=o.top-d:r>o.top+o.height&&(a.top=o.top+o.height-r)}else{var c=s.left,u=s.left+i;c<o.left?a.left=o.left-c:u>o.right&&(a.left=o.left+o.width-u)}return a},d=function(t){var s=e("body").find(".slds-popover");s.length>0&&s.remove()};e.fn.popover=function(t){var s=e.extend({assetsLocation:e.aljs.assetsLocation,modifier:"",theme:""},t);return this.each(function(){e("#"+e(this).data("aljs-show")).addClass("slds-hide")}),s.selector&&1===this.length?this.on("mouseenter",s.selector,s,i).on("focusin",s.selector,s,i).on("mouseleave",s.selector,s,d).on("blur",s.selector,s,d).on("touchstart",s.selector,s,function(t){t.stopPropagation();var l="tooltip"==s.modifier?".slds-popover--tooltip":".slds-popover";0==e(l).length?i():d()}):this.each(function(){var t=JSON.parse(JSON.stringify(s));t.selector=this,e(this).on("mouseenter",t,i).on("focusin",t,i).on("mouseleave",t,d).on("blur",t,d).on("touchstart",t,function(s){s.stopPropagation();var l="tooltip"==t.modifier?".slds-popover--tooltip":".slds-popover";0==e(l).length?i():d()})})}}(jQuery),"undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(e){var t=function(t,s){this.$el=e(t),this.settings=s,this.initTabs()};t.prototype={constructor:t,initTabs:function(){var t=this,s=this.$el.find("> .slds-tabs--default__nav > .slds-tabs--default__item > .slds-tabs--default__link, > .slds-tabs--scoped__nav > .slds-tabs--scoped__item > .slds-tabs--scoped__link"),i=this.$el.find("> .slds-tabs--default__nav > .slds-tabs--default__item, > .slds-tabs--scoped__nav > .slds-tabs--scoped__item"),l={self:t,children:i};s.on("click",function(s){return s.stopPropagation(),t.selectTab(e(s.target).data("aljs-show")),e(this).trigger("selected.aljs.tab"),!1}),""===this.settings.defaultTabId||0===e("#"+this.settings.defaultTabId).length?this.selectTab(s.first().data("aljs-show")):this.selectTab(this.settings.defaultTabId),i.keyup(l,this.processKeypress)},selectTab:function(e){this.$el.find("> .slds-tabs--default__nav > .slds-tabs--default__item, > .slds-tabs--scoped__nav > .slds-tabs--scoped__item").removeClass("slds-active").blur().find("> .slds-tabs--default__link, > .slds-tabs--scoped__link").attr("tabindex","-1").attr("aria-selected","false"),this.$el.find("> .slds-tabs--default__content, > .slds-tabs--scoped__content").hide(),this.$el.find('[data-aljs-show="'+e+'"]').focus().closest("li").addClass("slds-active").find("> .slds-tabs--default__link, > .slds-tabs--scoped__link").attr("tabindex","0").attr("aria-selected","true"),this.$el.find("#"+e).show().trigger("shown.aljs.tabcontent"),this.id=e,this.settings.onChange(this)},processKeypress:function(t){var s,i=t.data.children,l=e(i).length-1,a=e(".slds-active",e(i).parent()).index();37==t.which?(s=0==a?e(i).eq(l).find("[data-aljs-show]").data("aljs-show"):e(i).eq(a-1).find("[data-aljs-show]").data("aljs-show"),t.data.self.selectTab(s)):39==t.which&&(s=a==l?e(i).eq(0).find("[data-aljs-show]").data("aljs-show"):e(i).eq(a+1).find("[data-aljs-show]").data("aljs-show"),t.data.self.selectTab(s))}},e.fn.tabs=function(s){var i,l=arguments,a=e.extend({defaultTabId:"",onChange:function(e){},assetsLocation:e.aljs.assetsLocation},"object"==typeof s?s:{});if(this.each(function(){var n=e(this),o=n.data("aljs-tabs");if(!o){var d=new t(this,a);n.data("aljs-tabs",o=d)}"string"==typeof s&&(i=o[s](l[1],l[2]))}),void 0===i||i instanceof t)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return i}}(jQuery);