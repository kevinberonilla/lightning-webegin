<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Send Survey Modal</title>
    <link rel="stylesheet" href="assets/styles/salesforce-lightning-design-system.css">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="slds">
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <div class="slds-modal__header">
                    <button class="slds-button slds-modal__close slds-button--icon-inverse">
                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                            <use xlink:href="assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                        </svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 id="header43" class="slds-text-heading--medium">Send Survey</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium qbs-overflow--visible">
                    <!-- Recipients -->
                    <label class="slds-form-element__label" >Recipients</label>
                    <div class="slds-m-bottom--x-small js-pill-container"></div>
                    <div class="slds-form-element slds-lookup" data-select="single">
                        <div class="slds-form-element__control">
                            <div class="slds-input-has-icon slds-input-has-icon--right">
                                <svg aria-hidden="true" class="slds-input__icon">
                                    <use xlink:href="assets/icons/utility-sprite/svg/symbols.svg#search"></use>
                                </svg>
                                <input id="lookup" class="slds-lookup__search-input slds-input" type="search" placeholder="Search" aria-owns="lookup" role="combobox" aria-activedescendent="" aria-expanded="false" aria-autocomplete="list" />
                            </div>
                        </div>
                    </div>
                    <!-- /Recipients -->
                </div>
                <div class="slds-modal__footer">
                    <button class="slds-button slds-button--neutral">Cancel</button>
                    <button class="slds-button slds-button--neutral slds-button--brand">Send 3</button>
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/svg4everybody.min.js"></script>
    <script src="js/jquery.aljs-all.min.js"></script>
    <script>
        svg4everybody();

        $(document).ready(function() {
            $.aljsInit({
                scoped: true
            });

            var lookup = $('#lookup'),
                pillContainer = $('.js-pill-container');
            
            var pillMarkup =
                '<span class="slds-pill">' +
                '<span class="slds-icon_container slds-icon-standard-contact slds-pill__icon_container">' +
                '<svg aria-hidden="true" class="slds-icon">' +
                '<use xlink:href="assets/icons/standard-sprite/svg/symbols.svg#contact"></use>' +
                '</svg>' +
                '<span class="slds-assistive-text">Contact</span>' +
                '</span>' +
                '{{pillLabel}}' +
                '<button class="slds-button slds-button--icon slds-pill__remove slds-m-left--xx-small" data-aljs-dismiss="pill">' +
                '<svg aria-hidden="true" class="slds-button__icon">' +
                '<use xlink:href="assets/icons/utility-sprite/svg/symbols.svg#close"></use>' +
                '</svg>' +
                '<span class="slds-assistive-text">Remove</span>' +
                '</button>' +
                '</span>';
            
            var results = [{
                id: 'rossbelmont',
                label: 'Ross Belmont'
            }, {
                id: 'kevinberonilla',
                label: 'Kevin Beronilla'
            }, {
                id: 'mikeblazek',
                label: 'Michael Blazek'
            }, {
                id: 'sergioflores',
                label: 'Sergio Flores'
            }, {
                id: 'burhanislami',
                label: 'Burhan Islami'
            }, {
                id: 'georgekenessey',
                label: 'George Kenessey'
            }, ];
            
            lookup.lookup({
                items: results,
                onChange: function(currentSelection, isAdd) {
                    if (isAdd) {
                        var closeButton = $('.slds-lookup .slds-pill_container .slds-pill__remove'),
                            selectionLabel = currentSelection.label.replace(/<(.*?)>/g, '');
                        
                        pillContainer.append(pillMarkup.replace(/{{pillLabel}}/g, selectionLabel));
                        closeButton.click();
                    }
                }
            });
        });

    </script>
</body>

</html>
